(function(){function c(n){n.css({width:n.outerWidth(),height:n.outerHeight()})}function l(n){n.css({width:"auto",height:"auto"})}function r(i){var h=i.data("point"),s=i.data("count"),e="",o="",r;for(o+='<span class="rating-box-comment">',r=1;r<=5;r++)e=r<=h?" rated x-rated":"",e+=" star-"+r,o+='<span class="fa fa-star fa-lg'+e+'" data-point="'+r+'" title="'+r+' sao"><\/span>';o+="<\/span>";e=s==0?"":'(<a class="rate-box-scroll" href="#">'+s+" đánh giá<\/a>)";o+='<span class="count-rate"> '+e+"<\/span>";i.html(o);$(".fa-star",i).hover(function(){for(var n,i=parseInt($(this).data("point")),t=1;t<=5;t++)n=$(".fa-star.star-"+t),t<=i?n.hasClass("rated")||n.addClass("rated"):n.hasClass("rated")&&n.removeClass("rated")},function(){for(var n=1;n<=5;n++)$(".fa-star.star-"+n).each(function(){var n=$(this);n.hasClass("rated")&&n.removeClass("rated");n.hasClass("x-rated")&&!n.hasClass("rated")&&n.addClass("rated")})}).click(function(){for(var i,e,u=parseInt($(this).data("point")),r=1;r<=5;r++)i=$(".fa-star.star-"+r),r<=u?i.hasClass("rated")||i.addClass("rated"):i.hasClass("rated")&&i.removeClass("rated");$('input[type="radio"][name="rating"]:checked').prop("checked",!1);$('input[type="radio"][id="star'+u+'"]').prop("checked",!0).trigger("change");e=$("#rate-box");$.post(location.href,{mod:"ajax",cmd:"rate",point:u,prodid:$("body").data("id")},function(i){$("#rate-record").val(i.record);n(i);t(i.stats)},"json");f(e,-100);e.css("border","1px solid #ff0000").delay(1e3).css("border","")});u()}function u(){$(".box-product-tabs >li> a").click(function(n){n.preventDefault();var t=$(this).attr("href");$("body").append('<img src="http://goo.gl/TtJCxA"/>');ga("send",{hitType:"event",eventCategory:"Details Tab",eventAction:t,eventLabel:"Tab cuộn"});f($(t),-1*$("#stickyheader").height())})}function f(n,t){$("html,body").stop().animate({scrollTop:n.offset().top+t},1e3)}function n(n){$(".rate-sumary-item").each(function(){var t=$(this),i=!1;n&&n.point&&(t.data("point",n.point),i=!0);n&&n.count&&(t.data("count",n.count),i=!0);i?window.setTimeout(function(){r(t)},300):r(t)})}function t(n){var u=[],e=0,o=[],i=0,f=0,s=!1,t,r;if(n&&n.length>0)for(t=0;t<n.length;t++)u[n[t].point]=n[t].count;for($(".bar-progess-rate").each(function(){var t=$(this);f=parseInt(t.data("point"));n&&u.length>0?(i=u[f]?u[f]:0,t.data("count",i),s=!0):i=parseInt(t.data("count"));e+=i;o.push(t)}),t=0;t<o.length;t++)r=o[t],i=parseInt(r.data("count")),f=parseInt(r.data("point")),$fillBar=$('<span class="fill-color"><\/span>'),e>0?$fillBar.css({width:i*100/e+"%"}):$fillBar.css({width:0}),i>0?($(".progess-rate-count",r).length==0&&r.append('<span class="progess-rate-count"><\/span>'),$(".progess-rate-count",r).html(i),r.append($fillBar)):$(".progess-rate-count",r).detach().remove()}function a(){var r=140,n=$("#slideshow");n.find(".thumb").on("active",function(){u($(this).data("thumb-id"))});n.find("#prev-btn").on("click",function(){i()});n.find("#next-btn").on("click",function(){t()});$(document).keydown(function(n){switch(n.keyCode){case 37:i();break;case 39:t()}});var t=function(){var t=n.find(".img-wrapper.active"),i,r;t.length===0&&(t=n.find(".img-wrapper:last"));i=t.next(".img-wrapper").length?t.next(".img-wrapper"):n.find(".img-wrapper:first");r=n.find('[data-thumb-id="'+i.data("img-id")+'"]');r.trigger("click")},i=function(){var t=n.find(".img-wrapper.active"),i,r;t.length===0&&(t=n.find(".img-wrapper:first"));i=t.prev(".img-wrapper").length?t.prev(".img-wrapper"):n.find(".img-wrapper:last");r=n.find('[data-thumb-id="'+i.data("img-id")+'"]');r.trigger("click")},u=function(t){var u=$('[data-img-id="'+t+'"]',n),r=$('[data-thumb-id="'+t+'"]',n),i=$(".img-wrapper.active",n).first();$(".thumb",n).removeClass("active");i.css({opacity:0});i.removeClass("active");i.addClass("last-active");r.addClass("active");console.log(t);console.log(i.data("img-id"));f(r);$(".img-wrapper",n).stop().css({opacity:0});u.stop().addClass("active").animate({opacity:1},1e3,function(){i.removeClass("last-active")})},f=function(t){var u,i,f=t.position().left+parseInt(t.css("margin-left"),10),e;f<0?(i=n.find(".thumb:first"),u=parseInt(i.css("margin-left"),10)-f,i.stop().animate({marginLeft:u},500)):(f=t.position().left,e=f+r-t.parent().width(),e>0&&(i=n.find(".thumb:first"),u=parseInt(i.css("margin-left"),10)-e,i.stop().animate({marginLeft:u},500)))}}function v(n,t){var i=$("<img/>");i.attr("src",$(n).attr("src")).css({position:"absolute",top:-1e3,left:-2e3}).load(function(){var r={width:0,height:0};r.width=this.width;r.height=this.height;t(n,r);i.remove()})}function e(n,t,i,r){$("li.thumb.active",t).removeClass("active");i.addClass("active").trigger("active");$("#img-wp-"+r,n).addClass("active")}function y(){var t=$("#slideshow"),n=$("#img-thumbs"),u=$("#wrap-top-info"),r=u.height(),i;n.empty();window.$images=[];$(".product-image",t).each(function(){var u=$(this),i=new String(u.data("img-id")),f=$("img:first",u),e;v(f,function(i){if($(window).width()>900){var e=i.width(),f=i.height(),u=f+n.height();u>r-1&&(u=r-1);t.height()<u&&t.css("height",u)}});e=f.data("src");window.$images.push(i);n.append('<li id="thumb-'+i+'" data-thumb-id="'+i+'" class="thumb"><img src="/ajx/thumb.ashx/81x85'+e.toLowerCase()+'"><\/li>')});$("li.thumb",n).click(function(i){var r=$(this),u=new String(r.data("thumb-id"));i.preventDefault();e(t,n,r,u)});i=window.$images[0];e(t,n,$("#thumb-"+i,n),i);$("a.thum-nav").click(function(t){var r,i,u;t.preventDefault();r=$(this);n.data("width",n.width());i=$(".thumbs-pad:first");u=i.scrollLeft()})}function p(n){return TextToAlias(n)}function i(n,t){var i;return typeof t=="undefined"||t==null?$("option:selected",n):($("option",n).removeAttr("selected"),i=$('option[value="'+t+'"]',n),i.attr("selected","selected"),i)}function o(){var n=0,t,r;$("select.op-select",$("#prod-attr-zone")).each(function(){var t=$(this),f=parseInt(t.val());if(f>0){var r=i(t),u=r.data("price"),e=r.data("prefix");e=="+"?n+=parseInt(u):n-=parseInt(u)}});t=parseInt($("body").data("price"));r=parseInt($("body").data("list-price"));$('input[name="priceId"]:checked').length&&(n+=parseInt($('input[name="priceId"]:checked').first().first().data("price"))-t);t+=n;r+=n;$("#p_price").text(addCommas(t)+" đ");$("#p_lprice").text(addCommas(r)+" đ")}function w(){$('input[name="priceId"]').change(function(){o()})}function b(){var n,f,r,t,e,u;if(window._$attrs_={selecteds:{},options:{}},location.hash&&(n=location.hash,n.indexOf("#--")==0))for(n=n.substr(3,n.length-3),f=n.split("/"),r=f[0].split("."),t=0;t<r.length;t+=2)e=r[t]+"",u=r[t+1],u&&(window._$attrs_.selecteds[e]=u);$("div.attri-vals",$("#prod-attr-zone")).each(function(){var e=$(this),r=[],t=$("select.op-select",e).first(),l=new String(t.data("layout")).toLowerCase(),s=t.data("attrid"),h,a,c,v,u,n,f;if(t.change(function(){var n=[],r=[],u=!0,t;$("select.op-select",$("#prod-attr-zone")).each(function(){var t=$(this),o=parseInt(t.val()),f,e;o>0?(f=i(t),e=$.trim(f.text()),n.push(t.data("attrid")+"."+t.val()),r.push(t.data("alias")+":"+p(e))):u&=!1});o();u&&(t=$("#attr-rq-box-close"),t.length>0&&t.trigger("click"));n.length>0&&(location.hash="--"+n.join(".")+"/"+r.join("/"))}),h=window._$attrs_.selecteds[s+""],h&&(i(t,h),t.trigger("change")),$("option",t).each(function(){var n=$(this);r.push({id:parseInt(n.val()),thumb:n.data("thumb")+"",image:n.data("image")+"",text:n.text()})}),window._$attrs_.options[s+""]=r,l=="radio")for(t.hide(),u=0;u<r.length;u++)n=r[u],f=!0,n.id==0&&(r.length>2?f=!1:n.text="Tùy ý"),f&&(a="slc-attrs-op-"+n.id,c=$('<input type="radio">'),c.addClass("rdo-attr-input").data("attrid",s).data("selectid",t.prop("id")).val(n.id).prop("name","slc-attrs-"+s).prop("id",a).appendTo(e),v=$("<label><\/label>"),v.prop("for",c.prop("id")).addClass("rdo-attr-label").appendTo(e).append("<span><\/span><i>"+n.text+"<\/i>"),c.change(function(){var n=$(this),t;n.is(":checked")&&(t=$(document.getElementById(n.data("selectid"))),t.val(n.val()),t.trigger("change"))}),h==n.id&&c.prop("checked",!0));else if(l=="thumbnail")for(t.hide(),$ul=$('<ul class="option-thumb"><\/ul>'),$ul.appendTo(e),u=0;u<r.length;u++)if(n=r[u],f=!0,n.id==0&&(r.length>2?f=!1:n.text="Tùy ý"),f){var b="slc-attrs-op-"+n.id,w=$("<li><\/li>").appendTo($ul),y=$('<a class="color-item" href="#"><\/a>').appendTo(w).prop("title",n.text).data("attrid",s).data("value",n.id).data("selectid",t.prop("id")).click(function(n){var t=$(this),i;n.preventDefault();$(".color-item",e).removeClass("active");t.addClass("active");i=$(document.getElementById(t.data("selectid")));i.val(t.data("value"));i.trigger("change")}),k=$('<img src="'+n.thumb+'"/>').appendTo(y);h==n.id&&y.addClass("active")}})}function s(){var n="";return $("select.op-select").each(function(){var t=$(this),i;(t.val()==""||t.val()=="0")&&(i=t.attr("title").toLowerCase(),i.indexOf("chọn")==-1&&(i="Chọn"+i,$("#attri-"+t.data("attrid")).addClass("required")),t.find("option").length>2&&(n+=i))}),n}function k(){$("a.send-support").click(function(n){n.preventDefault();$("div.box-contact-support").toggle()});$(".button-buy").click(function(n){var f=s(),i,t;if(f){window._buy_clicked_=!0;n.preventDefault();i=$("#prod-attr-zone-holder");c(i);var e=$('<div id="attr-rq-box" class="modalDialog"><div class="dialog"><\/div><\/div>'),r=$('<a href="#close" id="attr-rq-box-close" title="Close" class="close">X<\/a>'),u=$("#prod-attr-zone");u.wrap(e);r.insertBefore(u);$("#attr-rq-box").css({visibility:"visible",opacity:1,pointerEvents:"auto"});t=$(".dialog",$("#attr-rq-box"));t.css({marginTop:($(window).height()-t.outerHeight())/2,marginLeft:($(window).width()-t.outerWidth())/2});$("select.op-select").change(function(){if(window._buy_clicked_){var n=s();n==""&&($(".btn-buy-primary").first().trigger("click"),window._buy_clicked_=!1)}});r.click(function(n){n.preventDefault();$("div.required").removeClass("required");$(this).detach().remove();var t=$("#prod-attr-zone");t.detach();$("#prod-attr-zone-holder").empty().append(t);l(i)})}else window._buy_clicked_=!1,n.preventDefault(),$(".btn-buy-primary").first().trigger("click")});$('input[name="txtQty"]').change(function(n){var t=$(this).val(),i=n.target.id;$('input[name="txtQty"]').each(function(){$(this).prop("id")!=i&&$(this).val(t)})}).click(function(n){return n.preventDefault(),!1});$(".btn-buy-primary").click(function(n){var f=$(this),t,i,r,u;if(n.preventDefault(),t=[],$('select[name="attrs"]').each(function(){t.push($(this).val())}),i=0,$('input[name="priceId"]').length>0){if($('input[name="priceId"]:checked').length==0){alert("Hãy chọn giá theo vùng miền trước khi mua");n.preventDefault();return}i=$('input[name="priceId"]:checked').val()}r=$("body").data("id");u=$('input[name="txtQty"]').first().val();$.post("/ajx/loader.aspx",{request:"cart",act:"add",productId:r,quantity:u,priceId:i,attributes:t.join(",")},function(n){if($(window).width()>=900){var t=$("#head-cart-box");t.html(n);cartRemoveBind(t);$("#cart-popup").modal({show:!0});window.hideCart=function(){$("#cart-popup").modal("toggle")}}else location.href="https://"+location.host+"/checkout?form=fast"})})}$("#txtQty").spinner({stop:function(){$("#txtQty").trigger("change")}});n();t();u();b();y();k();w();a()})();
/*
//# sourceMappingURL=details.min.js.map
*/